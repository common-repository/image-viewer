!function(){"use strict";var t={410:function(t,e,n){var a=n(206);e.H=a.createRoot,a.hydrateRoot},206:function(t){t.exports=ReactDOM}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,n),o.exports}!function(){var t=n(410),e=function(t){var e=t.attributes,n=t.clientId,a=e.width,r=e.height,o="#bpivbImageViewer-".concat(n);return React.createElement("style",{dangerouslySetInnerHTML:{__html:"\n\n\t\t".concat(o," {\n\t\t\ttext-align:center;\n\t\t}\n\n\t\t").concat(o," .bpivbPanorama{\n\t\t\theight:").concat(r,";\n\t\t\twidth:").concat(a,";\n\t\t} \n\n\t")}})},a=React,r=function(){return r=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)};function o(t,e){for(var n=t.length;n--;)if(t[n].pointerId===e.pointerId)return n;return-1}function i(t,e){var n;if(e.touches){n=0;for(var a=0,r=e.touches;a<r.length;a++){var c=r[a];c.pointerId=n++,i(t,c)}}else(n=o(t,e))>-1&&t.splice(n,1),t.push(e)}function c(t){for(var e,n=(t=t.slice(0)).pop();e=t.pop();)n={clientX:(e.clientX-n.clientX)/2+n.clientX,clientY:(e.clientY-n.clientY)/2+n.clientY};return n}function l(t){if(t.length<2)return 0;var e=t[0],n=t[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-e.clientX),2)+Math.pow(Math.abs(n.clientY-e.clientY),2))}"undefined"!=typeof window&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}));var u={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function s(t,e,n,a){u[t].split(" ").forEach((function(t){e.addEventListener(t,n,a)}))}function d(t,e,n){u[t].split(" ").forEach((function(t){e.removeEventListener(t,n)}))}"undefined"!=typeof window&&("function"==typeof window.PointerEvent?u={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(u={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));var p,m="undefined"!=typeof document&&!!document.documentMode;function f(){return p||(p=document.createElement("div").style)}var v=["webkit","moz","ms"],h={};function g(t){if(h[t])return h[t];var e=f();if(t in e)return h[t]=t;for(var n=t[0].toUpperCase()+t.slice(1),a=v.length;a--;){var r="".concat(v[a]).concat(n);if(r in e)return h[t]=r}}function y(t,e){return parseFloat(e[g(t)])||0}function b(t,e,n){void 0===n&&(n=window.getComputedStyle(t));var a="border"===e?"Width":"";return{left:y("".concat(e,"Left").concat(a),n),right:y("".concat(e,"Right").concat(a),n),top:y("".concat(e,"Top").concat(a),n),bottom:y("".concat(e,"Bottom").concat(a),n)}}function w(t,e,n){t.style[g(e)]=n}function x(t){var e=t.parentNode,n=window.getComputedStyle(t),a=window.getComputedStyle(e),r=t.getBoundingClientRect(),o=e.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,top:r.top,bottom:r.bottom,left:r.left,right:r.right,margin:b(t,"margin",n),border:b(t,"border",n)},parent:{style:a,width:o.width,height:o.height,top:o.top,bottom:o.bottom,left:o.left,right:o.right,padding:b(e,"padding",a),border:b(e,"border",a)}}}function E(t,e){return 1===t.nodeType&&" ".concat(function(t){return(t.getAttribute("class")||"").trim()}(t)," ").indexOf(" ".concat(e," "))>-1}var S=/^http:[\w\.\/]+svg$/;var A={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(t){t.preventDefault(),t.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:function(t,e,n){var a=e.x,r=e.y,o=e.scale,i=e.isSVG;if(w(t,"transform","scale(".concat(o,") translate(").concat(a,"px, ").concat(r,"px)")),i&&m){var c=window.getComputedStyle(t).getPropertyValue("transform");t.setAttribute("transform",c)}},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function M(t,e){if(!t)throw new Error("Panzoom requires an element as an argument");if(1!==t.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(!function(t){var e=t.ownerDocument,n=t.parentNode;return e&&n&&9===e.nodeType&&1===n.nodeType&&e.documentElement.contains(n)}(t))throw new Error("Panzoom should be called on elements that have been attached to the DOM");e=r(r({},A),e);var n=function(t){return S.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase()}(t),a=t.parentNode;a.style.overflow=e.overflow,a.style.userSelect="none",a.style.touchAction=e.touchAction,(e.canvas?a:t).style.cursor=e.cursor,t.style.userSelect="none",t.style.touchAction=e.touchAction,w(t,"transformOrigin","string"==typeof e.origin?e.origin:n?"0 0":"50% 50%");var p,m,f,v,h,y,b=0,M=0,O=1,R=!1;function P(e,n,a){if(!a.silent){var r=new CustomEvent(e,{detail:n});t.dispatchEvent(r)}}function z(e,a,r){var o={x:b,y:M,scale:O,isSVG:n,originalEvent:r};return requestAnimationFrame((function(){"boolean"==typeof a.animate&&(a.animate?function(t,e){var n=g("transform");w(t,"transition","".concat(n," ").concat(e.duration,"ms ").concat(e.easing))}(t,a):w(t,"transition","none")),a.setTransform(t,o,a),P(e,o,a),P("panzoomchange",o,a)})),o}function I(n,a,o,i){var c=r(r({},e),i),l={x:b,y:M,opts:c};if(!c.force&&(c.disablePan||c.panOnlyWhenZoomed&&O===c.startScale))return l;if(n=parseFloat(n),a=parseFloat(a),c.disableXAxis||(l.x=(c.relative?b:0)+n),c.disableYAxis||(l.y=(c.relative?M:0)+a),c.contain){var u=x(t),s=u.elem.width/O,d=u.elem.height/O,p=s*o,m=d*o,f=(p-s)/2,v=(m-d)/2;if("inside"===c.contain){var h=(-u.elem.margin.left-u.parent.padding.left+f)/o,g=(u.parent.width-p-u.parent.padding.left-u.elem.margin.left-u.parent.border.left-u.parent.border.right+f)/o;l.x=Math.max(Math.min(l.x,g),h);var y=(-u.elem.margin.top-u.parent.padding.top+v)/o,w=(u.parent.height-m-u.parent.padding.top-u.elem.margin.top-u.parent.border.top-u.parent.border.bottom+v)/o;l.y=Math.max(Math.min(l.y,w),y)}else if("outside"===c.contain){h=(-(p-u.parent.width)-u.parent.padding.left-u.parent.border.left-u.parent.border.right+f)/o,g=(f-u.parent.padding.left)/o;l.x=Math.max(Math.min(l.x,g),h);y=(-(m-u.parent.height)-u.parent.padding.top-u.parent.border.top-u.parent.border.bottom+v)/o,w=(v-u.parent.padding.top)/o;l.y=Math.max(Math.min(l.y,w),y)}}return c.roundPixels&&(l.x=Math.round(l.x),l.y=Math.round(l.y)),l}function C(n,a){var o=r(r({},e),a),i={scale:O,opts:o};if(!o.force&&o.disableZoom)return i;var c=e.minScale,l=e.maxScale;if(o.contain){var u=x(t),s=u.elem.width/O,d=u.elem.height/O;if(s>1&&d>1){var p=(u.parent.width-u.parent.border.left-u.parent.border.right)/s,m=(u.parent.height-u.parent.border.top-u.parent.border.bottom)/d;"inside"===e.contain?l=Math.min(l,p,m):"outside"===e.contain&&(c=Math.max(c,p,m))}}return i.scale=Math.min(Math.max(n,c),l),i}function X(t,e,a,r){var o=I(t,e,O,a);return b!==o.x||M!==o.y?(b=o.x,M=o.y,z("panzoompan",o.opts,r)):{x:b,y:M,scale:O,isSVG:n,originalEvent:r}}function Y(t,e,n){var a=C(t,e),r=a.opts;if(r.force||!r.disableZoom){t=a.scale;var o=b,i=M;if(r.focal){var c=r.focal;o=(c.x/t-c.x/O+b*t)/t,i=(c.y/t-c.y/O+M*t)/t}var l=I(o,i,t,{relative:!1,force:!0});return b=l.x,M=l.y,O=t,z("panzoomzoom",r,n)}}function N(t,n){var a=r(r(r({},e),{animate:!0}),n);return Y(O*Math.exp((t?1:-1)*a.step),a)}function L(e,a,o,i){var c=x(t),l=c.parent.width-c.parent.padding.left-c.parent.padding.right-c.parent.border.left-c.parent.border.right,u=c.parent.height-c.parent.padding.top-c.parent.padding.bottom-c.parent.border.top-c.parent.border.bottom,s=a.clientX-c.parent.left-c.parent.padding.left-c.parent.border.left-c.elem.margin.left,d=a.clientY-c.parent.top-c.parent.padding.top-c.parent.border.top-c.elem.margin.top;n||(s-=c.elem.width/O/2,d-=c.elem.height/O/2);var p={x:s/l*(l*e),y:d/u*(u*e)};return Y(e,r(r({},o),{animate:!1,focal:p}),i)}Y(e.startScale,{animate:!1,force:!0}),setTimeout((function(){X(e.startX,e.startY,{animate:!1,force:!0})}));var T=[];function W(t){if(!function(t,e){for(var n=t;null!=n;n=n.parentNode)if(E(n,e.excludeClass)||e.exclude.indexOf(n)>-1)return!0;return!1}(t.target,e)){i(T,t),R=!0,e.handleStartEvent(t),p=b,m=M,P("panzoomstart",{x:b,y:M,scale:O,isSVG:n,originalEvent:t},e);var a=c(T);f=a.clientX,v=a.clientY,h=O,y=l(T)}}function V(t){if(R&&void 0!==p&&void 0!==m&&void 0!==f&&void 0!==v){i(T,t);var n=c(T),a=T.length>1,r=O;if(a)0===y&&(y=l(T)),L(r=C((l(T)-y)*e.step/80+h).scale,n,{animate:!1},t);a&&!e.pinchAndPan||X(p+(n.clientX-f)/r,m+(n.clientY-v)/r,{animate:!1},t)}}function B(t){1===T.length&&P("panzoomend",{x:b,y:M,scale:O,isSVG:n,originalEvent:t},e),function(t,e){if(e.touches)for(;t.length;)t.pop();else{var n=o(t,e);n>-1&&t.splice(n,1)}}(T,t),R&&(R=!1,p=m=f=v=void 0)}var Z=!1;function j(){Z||(Z=!0,s("down",e.canvas?a:t,W),s("move",document,V,{passive:!0}),s("up",document,B,{passive:!0}))}return e.noBind||j(),{bind:j,destroy:function(){Z=!1,d("down",e.canvas?a:t,W),d("move",document,V),d("up",document,B)},eventNames:u,getPan:function(){return{x:b,y:M}},getScale:function(){return O},getOptions:function(){return function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(e)},handleDown:W,handleMove:V,handleUp:B,pan:X,reset:function(t){var n=r(r(r({},e),{animate:!0,force:!0}),t);O=C(n.startScale,n).scale;var a=I(n.startX,n.startY,O,n);return b=a.x,M=a.y,z("panzoomreset",n)},resetStyle:function(){a.style.overflow="",a.style.userSelect="",a.style.touchAction="",a.style.cursor="",t.style.cursor="",t.style.userSelect="",t.style.touchAction="",w(t,"transformOrigin","")},setOptions:function(n){for(var r in void 0===n&&(n={}),n)n.hasOwnProperty(r)&&(e[r]=n[r]);(n.hasOwnProperty("cursor")||n.hasOwnProperty("canvas"))&&(a.style.cursor=t.style.cursor="",(e.canvas?a:t).style.cursor=e.cursor),n.hasOwnProperty("overflow")&&(a.style.overflow=n.overflow),n.hasOwnProperty("touchAction")&&(a.style.touchAction=n.touchAction,t.style.touchAction=n.touchAction)},setStyle:function(e,n){return w(t,e,n)},zoom:Y,zoomIn:function(t){return N(!0,t)},zoomOut:function(t){return N(!1,t)},zoomToPoint:L,zoomWithWheel:function(t,n){t.preventDefault();var a=r(r(r({},e),n),{animate:!1}),o=(0===t.deltaY&&t.deltaX?t.deltaX:t.deltaY)<0?1:-1;return L(C(O*Math.exp(o*a.step/3),a).scale,t,a,t)}}}M.defaultOptions=A;function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw r}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return R(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var P=jQuery,z=function(t){var e=t.attributes,n=t.clientId,r=t.imageMapEle,o=e.viewerType,i=e.zoom,c=e.magnify,l=e.cId,u=e.img,s=e.autoRotate,d=e.rotateSpeed,p=e.hideControl,m=e.width,f=e.height,v=O((0,a.useState)(null),2),h=v[0],g=v[1],y=O((0,a.useState)(null),2),b=y[0],w=y[1];return(0,a.useEffect)((function(){if(h&&(h.parent.removeEventListener("wheel",h.zoomWithWheel),h.destroy()),b&&b.destroy(),"zoom"===o)!function(t,e,n){var a=t.disablePan,r=t.disableZoom,o=t.disableXAxis,i=t.disableYAxis,c=t.duration,l=t.startScale,u=t.step,s=document.getElementById("panzoom-".concat(e)),d=M(s,{animate:!1,canvas:!1,cursor:"move",disablePan:a,disableZoom:r,disableXAxis:o,disableYAxis:i,duration:c,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",maxScale:12,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,startX:0,startY:0,startScale:l,step:u,contain:null,touchAction:"none"});n(d);var p=s.parentElement;d.parent=p,p.addEventListener("wheel",d.zoomWithWheel)}(i,l,g);else if("magnify"===o){var t=P(".magnify-".concat(l," img")).magnify();w(t)}else"pano"===o?function(t,e,n,a,r){var o=document.querySelector("#bpivbImageViewer-".concat(t," .bpivbPanorama"));o.innerHTML="";var i=e.url,c=new PANOLENS.ImagePanorama(i);new PANOLENS.Viewer({container:o,autoRotate:n,autoRotateSpeed:a,controlBar:r}).add(c)}(n,u,s,d,p):console.log("Unknown viewer type")}),[u,o,i,c,s,d,p,m,f]),React.createElement(React.Fragment,null,"zoom"===o&&React.createElement("div",null,React.createElement("div",{id:"panzoom-".concat(l)},React.createElement("img",{src:null==u?void 0:u.url,alt:u.title}))),"magnify"===o&&React.createElement("div",null,React.createElement("div",{className:"magnify-".concat(l)},React.createElement("img",{src:null==u?void 0:u.url,alt:null==u?void 0:u.title,"data-magnify-src":null==u?void 0:u.url,"data-magnify-speed":null==c?void 0:c.speed,"data-magnify-timeout":null==c?void 0:c.timeOut,touchBottomOffset:"0",finalWidth:"500",finalHeight:"500",magnifiedWidth:"1000",limitBounds:!1,mobileCloseEvent:"touchstart"}))),"pano"===o&&React.createElement("div",{className:"bpivbPanorama"}),"map"===o&&r)};document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".wp-block-bpivb-image-viewer-directory").forEach((function(n){var a=JSON.parse(n.dataset.attributes);(0,t.H)(n).render(React.createElement(React.Fragment,null,React.createElement(e,{attributes:a,clientId:a.cId}),React.createElement("div",{className:"bpivbImageViewer"},React.createElement(I,{attributes:a,clientId:a.cId})))),null==n||n.removeAttribute("data-attributes")}))}));var I=function(t){var e=t.attributes,n=t.clientId,a=e.maps,r=e.img,o=e.cId,i=React.createElement("div",{className:"bpivbImageMap"},React.createElement("img",{src:null==r?void 0:r.url,useMap:"#image-map-".concat(o)}),React.createElement("map",{name:"#image-map-".concat(o)},a.map((function(t,e){var n=t.width,a=t.height,r=t.top,o=t.left,i=t.link,c=t.title,l=t.target;return React.createElement("area",{shape:"rect",key:e,target:l,alt:c,title:c,href:i,style:{top:r,left:o,width:n+"px",height:a+"px",position:"absolute"}})}))));return React.createElement(z,{attributes:e,clientId:n,imageMapEle:i})}}()}();
//# sourceMappingURL=script.js.map